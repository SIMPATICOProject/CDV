<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" /> 
    <title>Service Editor</title>
    <style>[class*="foundicon-"] {font-family: GeneralFoundicons;font-style: normal;}</style>
    
	 <!-- <link rel="stylesheet" id="theme_stylesheet" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css">-->
	<link rel="stylesheet" id="theme_stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Font Awesome icons (Bootstrap, Foundation, and jQueryUI also supported) -->
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
	
	<!-- Jquery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
	<!-- Selectize-->
	<script src="//cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.1/js/standalone/selectize.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.1/css/selectize.bootstrap3.css">
    <!--JSONEditor-->
    <script src="https://cdn.jsdelivr.net/npm/@json-editor/json-editor/dist/jsoneditor.min.js"></script>
	
    
	<script>
     
     JSONEditor.plugins.selectize.enable = true;
	// Set the default CSS theme and icon library globally
    JSONEditor.defaults.theme = 'bootstrap3';
    JSONEditor.defaults.iconlib = 'bootstrap3';
	
	var serviceID="6";
	var starting_value="{}"
	$(function() {
        $.get( "http://localhost:8080/service-manager/api/v1/services/"+serviceID, function( data ) {
        starting_value=data;
		// Initialize the editor
      var editor = new JSONEditor(document.getElementById('editor_holder'),{
        // Enable fetching schemas via ajax
        ajax: true,
		disable_properties:true,
        
        // The schema for the editor
        schema: {
          $ref: "json/service-entry.json"
          
        },
        
        // Seed the form with a starting value
       startval: starting_value
      });
      
      // Hook up the submit button to log to the console
      document.getElementById('submit').addEventListener('click',function() {
        // Get the value from the editor
        console.log(editor.getValue());
      });
      
      // Hook up the Restore to Default button
      document.getElementById('restore').addEventListener('click',function() {
        editor.setValue(starting_value);
      });
      
      // Hook up the validation indicator to update its 
      // status whenever the editor changes
      editor.on('change',function() {
        // Get an array of errors from the validator
        var errors = editor.validate();
        
        var indicator = document.getElementById('valid_indicator');
        
        // Not valid 
        if(errors.length) {
          indicator.className = 'label alert';
          indicator.textContent = 'not valid';
        }
        // Valid
        else {
          indicator.className = 'label success';
          indicator.textContent = 'valid';
        }
      });
           });
	  });
    </script>
  </head>
  <body>
    <div class="container">
    <div class="row">
	<h2>Editor:</h2>
	</div>
	<div class='row'>
      <div class='medium-12-columns'>
        <button id='submit' >Submit (console.log)</button>
        <button id='restore' >Restore to Default</button>
        <span id='valid_indicator' class='label'></span>
      </div>
    </div>
	<div class='row'>
	<div class='medium-12-columns'>
      <div id='editor_holder' class='medium-12 columns'></div>
	  
    </div>
	</div>
    </div>
    <script>
      
      
      
    </script>
  </body>
</html>
